<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="stylesheet" href="/src/admin/assets/css/style.css" />
  <title>매장 관리자 매핑 (SUPER)</title>
</head>
<body>
<div class="container">
  <h1>매장 관리자 매핑 (SUPER 전용)</h1>

  <!-- 로그인 상태 / 로그아웃 -->
  <div id="super-status" class="hstack"
       style="justify-content:space-between;align-items:center;margin-bottom:12px">
    <div id="super-status-text" class="small">로그인 상태 확인 중...</div>
    <button id="super-logout" class="btn small" style="display:none">
      SUPER 로그아웃
    </button>
  </div>

  <!-- SUPER 로그인 카드 -->
  <div id="super-login-card"
       class="card vstack"
       style="display:none;max-width:420px;margin-bottom:16px">
    <h3>SUPER 로그인</h3>
    <p class="small">
      이 페이지는 매장 관리자 계정과 매장 ID(storeId)를 연결하는
      <b>최상위(SUPER) 매핑 페이지</b>입니다.<br>
      Vercel 환경변수 <code>SUPER_ADMINS_JSON</code>에 등록된 계정만 로그인할 수 있습니다.
    </p>
    <div class="vstack" style="gap:8px;margin-top:8px">
      <input id="super-id" class="input" placeholder="SUPER 아이디 (예: super)">
      <input id="super-pw" class="input" type="password" placeholder="비밀번호">
      <button id="super-login-btn" class="btn primary">로그인</button>
      <div id="super-login-msg"
           class="small"
           style="color:#f97316;margin-top:4px"></div>
    </div>
  </div>

  <!-- 매핑 카드 (SUPER 로그인 시에만 보임) -->
  <div id="mapping-card" class="card vstack" style="display:none">
    <div class="small">
      관리자 계정(아이디/이메일)을 매장 ID(<code>storeId</code>)와 연결합니다.<br>
      데이터 구조는 <code>['system','storeAdmins']</code>에<br>
      <code>{ [adminId]: { storeId, note? } }</code> 형태로 저장됩니다.
    </div>

    <div class="hstack" style="gap:8px;flex-wrap:wrap;margin-top:10px">
      <input id="map-admin"
             class="input"
             placeholder="관리자 ID (예: owner@narae.com)"
             style="min-width:240px">
      <input id="map-store"
             class="input"
             placeholder="storeId (예: narae)"
             style="min-width:160px">
      <input id="map-note"
             class="input"
             placeholder="메모 (선택)"
             style="min-width:200px">
      <button id="map-add" class="btn primary">매핑 추가/수정</button>
    </div>

    <table class="table" style="margin-top:14px">
      <thead>
      <tr>
        <th>관리자 ID</th>
        <th>storeId</th>
        <th>메모</th>
        <th class="right">관리/삭제</th>
      </tr>
      </thead>
      <tbody id="map-body">
      <tr><td colspan="4" class="small">등록된 매핑 없음</td></tr>
      </tbody>
    </table>

    <p class="small" style="margin-top:10px;color:#9ca3af">
      · 이 화면에서 저장된 매핑은 <code>['system','storeAdmins']</code> 경로로 저장됩니다.<br>
      · 관리자 콘솔 로그인 시, 해당 관리자 ID에 매핑된 <code>storeId</code>를 기본 매장으로 사용할 수 있습니다.<br>
      · 나중에 DB를 붙일 때는 이 JSON 구조를 그대로 테이블 하나로 옮겨 쓰면 됩니다.
    </p>
  </div>
</div>

<!-- SUPER JWT + 매장 매핑 스크립트 -->
<script type="module" src="/src/admin/assets/js/store-admin.js"></script>
</body>
</html>
